<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenMoCo AVR Libraries: OMMotor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenMoCo AVR Libraries
   </div>
   <div id="projectbrief">Motion Control and MoCoBus Libraries for the AVR Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_o_m_motor.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OMMotor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Motor Manager.  
 <a href="class_o_m_motor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_o_m_motor_8h_source.html">OMMotor.h</a>&gt;</code></p>

<p><a href="class_o_m_motor-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>s_splineCal</b></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af7476c0ad5608f55afe84f1b106d65dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#af7476c0ad5608f55afe84f1b106d65dd">OMMotor</a> ()</td></tr>
<tr class="memitem:aaeaf316ce9ab844f4f7f6400330cee08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#aaeaf316ce9ab844f4f7f6400330cee08">ms</a> (uint8_t)</td></tr>
<tr class="memitem:a576cf5e0aec6027764a46713161962a8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a576cf5e0aec6027764a46713161962a8">ms</a> ()</td></tr>
<tr class="memitem:a68e24c2dbe8f0060d8378a487165a752"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a68e24c2dbe8f0060d8378a487165a752">backlash</a> (uint8_t)</td></tr>
<tr class="memitem:a0adecc410511e4dac527b93f378d29c7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a0adecc410511e4dac527b93f378d29c7">backlash</a> ()</td></tr>
<tr class="memitem:a5cc55f2fc4fa7abccee93fa19487f6af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler</a> (void(*)(uint8_t))</td></tr>
<tr class="memitem:afe30fede1ee2022879691dca251e3046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#afe30fede1ee2022879691dca251e3046">maxStepRate</a> (unsigned int)</td></tr>
<tr class="memitem:ad4445e8f1adc4efac5f792af25f7e660"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate</a> ()</td></tr>
<tr class="memitem:a382b9b9aaa918e6d58b0d3bd4701ee3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a382b9b9aaa918e6d58b0d3bd4701ee3a">maxSpeed</a> (unsigned int)</td></tr>
<tr class="memitem:a027801e9563fbed2ee39de06e90abc0d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a027801e9563fbed2ee39de06e90abc0d">maxSpeed</a> ()</td></tr>
<tr class="memitem:a1adc5d528f0f1f25c32098debae06212"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a1adc5d528f0f1f25c32098debae06212">enable</a> (bool)</td></tr>
<tr class="memitem:a9bf7bbb045003f05fbb63d6418fb19a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a9bf7bbb045003f05fbb63d6418fb19a5">enable</a> ()</td></tr>
<tr class="memitem:ac91239f86656bf33b05ad4c3ec47cfc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ac91239f86656bf33b05ad4c3ec47cfc9">continuous</a> (bool)</td></tr>
<tr class="memitem:a72853e0d2422382a83da037b16d74932"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a72853e0d2422382a83da037b16d74932">continuous</a> ()</td></tr>
<tr class="memitem:a7de4c80e4a2627368c6c0b375e0a574e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a7de4c80e4a2627368c6c0b375e0a574e">contSpeed</a> (float)</td></tr>
<tr class="memitem:ac7d2282b01f693b2cd49fb4210a278a8"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ac7d2282b01f693b2cd49fb4210a278a8">contSpeed</a> ()</td></tr>
<tr class="memitem:a68c0b61b84e4e095b6463cadc275adae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move</a> ()</td></tr>
<tr class="memitem:a4c457cae2cdb8d0d9a9bdd0ee872a6a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a4c457cae2cdb8d0d9a9bdd0ee872a6a8">move</a> (bool, unsigned long)</td></tr>
<tr class="memitem:ab7e453c668634a35194ca67cc42ae9a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ab7e453c668634a35194ca67cc42ae9a3">move</a> (bool, unsigned long, unsigned long, unsigned long, unsigned long)</td></tr>
<tr class="memitem:a00a5361f6de10d4953f3af31f8e8e60f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan</a> (unsigned long, bool, unsigned long, unsigned long, unsigned long)</td></tr>
<tr class="memitem:a5c625e3894926c9123979312ab13a746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun</a> ()</td></tr>
<tr class="memitem:a0da5d9617e961b8c9430815ce7dba80f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a0da5d9617e961b8c9430815ce7dba80f">home</a> ()</td></tr>
<tr class="memitem:a51cda9b254c4272d077e07f8f3674a70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a51cda9b254c4272d077e07f8f3674a70">homeSet</a> ()</td></tr>
<tr class="memitem:a7d693185d668a347e9886f376eeb563a"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a7d693185d668a347e9886f376eeb563a">homeDistance</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4b5e52fb2519110413cee5ba819ab89c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a4b5e52fb2519110413cee5ba819ab89c">dir</a> (bool)</td></tr>
<tr class="memitem:a54fdfc4868bd5603993968433651c8e1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir</a> ()</td></tr>
<tr class="memitem:aaa6432a11cc8aa43cdcac30e43bf038f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#aaa6432a11cc8aa43cdcac30e43bf038f">running</a> ()</td></tr>
<tr class="memitem:a9c5a196f71017496048e48e8ba6d2dad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a9c5a196f71017496048e48e8ba6d2dad">sleep</a> (bool)</td></tr>
<tr class="memitem:adc0fa1f45e9d6b5ee5b42876bde4ec84"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#adc0fa1f45e9d6b5ee5b42876bde4ec84">sleep</a> ()</td></tr>
<tr class="memitem:a679f6967ffb3a019ca23046c95c485f7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a679f6967ffb3a019ca23046c95c485f7">steps</a> (unsigned long)</td></tr>
<tr class="memitem:a92df9971ba19be0a214e283934190285"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a92df9971ba19be0a214e283934190285">steps</a> ()</td></tr>
<tr class="memitem:a5515f30ddba250317a9fcc7656027ce9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a5515f30ddba250317a9fcc7656027ce9">maxSteps</a> (unsigned long)</td></tr>
<tr class="memitem:ac58fecb524061103a892aa668a383001"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ac58fecb524061103a892aa668a383001">maxSteps</a> ()</td></tr>
<tr class="memitem:a3166a4727f6b0374d2d17a33c7582306"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a3166a4727f6b0374d2d17a33c7582306">stepsMoved</a> ()</td></tr>
<tr class="memitem:a8c528baf37154d347366083f0f816846"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a8c528baf37154d347366083f0f816846">stop</a> ()</td></tr>
<tr class="memitem:ac8bb3912a3ce86b15842e79d0b421204"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a> ()</td></tr>
<tr class="memitem:a55b7db1caa5d2b73603d94af75a974a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_m_motor.html#a55b7db1caa5d2b73603d94af75a974a1">easing</a> (uint8_t)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Motor Manager. </p>
<p>The Motor Manager class provides the ability to run a stepper motor on the nanoMoCo platform in either continuous motion or on-demand motion using asynchronous (non-blocking) control.</p>
<p>All actions performed by the Motor Manager are non-blocking, and this library uses the Timer1 library to achieve this. For this reason, you may only have one such object instantiated in your program, and under no circumstances should you attempt to use Timer1 in another part of your program while a motor action is being performed.</p>
<p>Status reporting from the Motor Manager is handled via a callback function, which you may specify. This function will be called at specified times with a special code to indicate the status. For more information on this, see <a class="el" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler()</a>.</p>
<p>It is not possible to specify the motor control lines at this time, and the library will only work for other Arduino-compatible devices when they use the same pins for the stepper driver.</p>
<p>For information on complex movements and motion profiles with the <a class="el" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> library, see the <a class="el" href="ommotion.html">Motion Capabilities</a> section.</p>
<p>Example of a Simple Stepper Program:</p>
<div class="fragment"><div class="line">   <span class="comment">// note: You -always- have to include the TimerOne library in an arduino</span></div>
<div class="line">   <span class="comment">// sketch before including the OMMotor header</span></div>
<div class="line">   </div>
<div class="line"><span class="preprocessor">#include &quot;TimerOne.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;OMMotor.h&quot;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> Motor = <a class="code" href="class_o_m_motor.html#af7476c0ad5608f55afe84f1b106d65dd">OMMotor</a>();</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  </div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a1adc5d528f0f1f25c32098debae06212">enable</a>(<span class="keyword">true</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#ac91239f86656bf33b05ad4c3ec47cfc9">continuous</a>(<span class="keyword">false</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler</a>(motorCallback);</div>
<div class="line">  </div>
<div class="line">  Serial.begin(19200);</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>( ! Motor.<a class="code" href="class_o_m_motor.html#aaa6432a11cc8aa43cdcac30e43bf038f">running</a>() ) {</div>
<div class="line">  delay(1000);</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;Moving!&quot;</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move</a>(<span class="keyword">true</span>, 1000);</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> motorCallback( byte code ) {</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>( code == OM_MOT_DONE ) {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Done!&quot;</span>);</div>
<div class="line">    Serial.print(<span class="stringliteral">&quot;Moved: &quot;</span>);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> smoved = Motor.<a class="code" href="class_o_m_motor.html#a3166a4727f6b0374d2d17a33c7582306">stepsMoved</a>();</div>
<div class="line">    Serial.println(smoved, DEC);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Begin!&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section author"><dt>Author:</dt><dd>C. A. Church</dd></dl>
<p>(c) 2008-2011 C. A. Church / Dynamic Perception</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8h_source.html#l00402">402</a> of file <a class="el" href="_o_m_motor_8h_source.html">OMMotor.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af7476c0ad5608f55afe84f1b106d65dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_m_motor.html">OMMotor</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor</p>
<p>Creates a new instance of the <a class="el" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> class. Sets all control outputs to the output state. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00083">83</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a68e24c2dbe8f0060d8378a487165a752"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void backlash </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>p_Back</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Backlash Compensation Amount</p>
<p>Sets the current backlash compensation amount.</p>
<p>The backlash compensation allows for adjustments to moves when the gear train attached to your motor exhibits backlash. If the direction of the motor is changed between moves, the specified amount of steps will be added to the next movement, to take up the slack created by the backlash.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Back</td><td>The backlash compensation amount, in steps </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00316">316</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0adecc410511e4dac527b93f378d29c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t backlash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Backlash Compensation Amount</p>
<p>Returns the currently set backlash compensation amount.</p>
<dl class="section return"><dt>Returns:</dt><dd>Backlash compensation amount </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00298">298</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac8bb3912a3ce86b15842e79d0b421204"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clear Steps Moved</p>
<p>Clears the count of steps moved. Additionally, if the motor is currently running, any movement will be immediately stopped, and the callback will be executed with the OM_MOT_DONE argument.</p>
<p>This method does NOT reset the home location for the motor. It does, however, reset any plan currently executing or previously executed. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01248">1248</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac91239f86656bf33b05ad4c3ec47cfc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void continuous </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_En</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set Continuous Motion Mode
</pre><p>Enables or disables continuous motion mode.</p>
<p>In continuous motion mode, the motor will run continuously at the specified speed until either a <a class="el" href="class_o_m_motor.html#a8c528baf37154d347366083f0f816846">stop()</a> request is received, or <a class="el" href="class_o_m_motor.html#ac58fecb524061103a892aa668a383001">maxSteps()</a> are reached. When continuous mode is disabled, the motor only moves the distance specified by <a class="el" href="class_o_m_motor.html#a92df9971ba19be0a214e283934190285">steps()</a> or passed via the two-argument form of <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a>.</p>
<p>Note: you may adjust the currently moving speed at any time, using <a class="el" href="class_o_m_motor.html#ac7d2282b01f693b2cd49fb4210a278a8">contSpeed()</a>.</p>
<p>Of additional note: when in continous mode, the callback will be executed immediately and passed the OM_MOT_DONE value when calling <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a>, indicating that you are free to do other activities while the motor is moving.</p>
<p>Below is an example of performing a continuous motion move, with a <a class="el" href="class_o_m_motor.html#ac58fecb524061103a892aa668a383001">maxSteps()</a> value set. The motor will move at a speed of 1,000 steps/second, and will automatically stop its self after 5,000 steps have been taken. Once the motor is stopped, the steps moved value is cleared out, and we're ready to move again.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;TimerOne.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;OMMotor.h&quot;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> Motor = <a class="code" href="class_o_m_motor.html#af7476c0ad5608f55afe84f1b106d65dd">OMMotor</a>();</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_steps = 5000;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  </div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a1adc5d528f0f1f25c32098debae06212">enable</a>(<span class="keyword">true</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a9c5a196f71017496048e48e8ba6d2dad">sleep</a>(<span class="keyword">true</span>);</div>
<div class="line">  </div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#ac91239f86656bf33b05ad4c3ec47cfc9">continuous</a>(<span class="keyword">true</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a7de4c80e4a2627368c6c0b375e0a574e">contSpeed</a>(1000);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a5515f30ddba250317a9fcc7656027ce9">maxSteps</a>(5000);</div>
<div class="line">  </div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler</a>(motorCallback);</div>
<div class="line">  </div>
<div class="line">  Serial.begin(19200);</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>( ! Motor.<a class="code" href="class_o_m_motor.html#aaa6432a11cc8aa43cdcac30e43bf038f">running</a>() ) {</div>
<div class="line"></div>
<div class="line">  delay(1000);</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;Clearing Motor&quot;</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;Starting Continuous Motion!&quot;</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move</a>();</div>
<div class="line">  </div>
<div class="line"> }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">    Serial.print(<span class="stringliteral">&quot;Moved: &quot;</span>);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> smoved = Motor.<a class="code" href="class_o_m_motor.html#a3166a4727f6b0374d2d17a33c7582306">stepsMoved</a>();</div>
<div class="line">    Serial.println(smoved, DEC);</div>
<div class="line">    </div>
<div class="line">    delay(1000);   </div>
<div class="line">     </div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> motorCallback( byte code ) {</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>( code == OM_MOT_DONE ) {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Done!&quot;</span>);</div>
<div class="line">    Serial.print(<span class="stringliteral">&quot;Moved: &quot;</span>);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> smoved = Motor.<a class="code" href="class_o_m_motor.html#a3166a4727f6b0374d2d17a33c7582306">stepsMoved</a>();</div>
<div class="line">    Serial.println(smoved, DEC);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Begin!&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_En</td><td>Enable (true) or Disable (false() continuous motion </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00475">475</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a72853e0d2422382a83da037b16d74932"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool continuous </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Continuous Motion Value</p>
<p>Returns the current continuous motion value.</p>
<dl class="section return"><dt>Returns:</dt><dd>Enabled (true), or Disabled (false) </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00488">488</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7de4c80e4a2627368c6c0b375e0a574e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void contSpeed </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>p_Speed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Continuous Motion Speed</p>
<p>Sets the current continuous motion speed, in steps per second.</p>
<p>You may set the speed even while a continuous move is running, and the speed will be immediately changed.</p>
<p>Allowable values are any valid positive range of a floating point integer from 0.00000001 to the currently set maximum step rate. See <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a> for more information. If you attempt to set a speed higher than the current <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a>, your input will be ignored.</p>
<p>It is not recommended to call this method while executing a non-continuous move, or after a move has been planned. Doing so will result in loss of control of the motor, or corruption of your planned move.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Speed</td><td>Steps per second </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00512">512</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac7d2282b01f693b2cd49fb4210a278a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int contSpeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Continuous Motion Speed</p>
<p>Returns the current continuous motion speed.</p>
<dl class="section return"><dt>Returns:</dt><dd>Steps per second </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00536">536</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4b5e52fb2519110413cee5ba819ab89c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dir </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_Dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set Current Direction</p>
<p>Sets the current direction value.</p>
<p>Note: if called while a move is underway, the direction will be changed immediately, but backlash compensation will not be applied. Additionally, if this method is called during a move executed via the two-argument form of <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a>, then the direction value may not be retained after the move is completed.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Dir</td><td>Direction value (true or false) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00190">190</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a54fdfc4868bd5603993968433651c8e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Current Direction</p>
<p>Returns the current direction value.</p>
<p>Note: if called in the middle of a move, the value returned may be different than the value after the move is completed, if you called <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a> in its two-argument form.</p>
<dl class="section return"><dt>Returns:</dt><dd>The current direction value (true or false) </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00171">171</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a55b7db1caa5d2b73603d94af75a974a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void easing </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>p_easeType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set Easing Algorithm</p>
<p>Sets the easing algorithm to be used for future moves.</p>
<p>You may specify an easing type using the constants OM_MOT_LINEAR, OM_MOT_QUAD, and OM_MOT_QUADINV. Doing so will change the algorithm for future moves.</p>
<p>You may not change the easing algorithm while a move is executing, attempting to do so will result in no change to the easing algorithm to prevent dangerous fluctuations in motor speed.</p>
<p>If you attempt to specify a value for the easing type which is not supported, no change will be made.</p>
<p>See the <a class="el" href="ommotion.html">Motion Capabilities</a> section for more information about easing algorithms.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_easeType</td><td>The type of easing algorithm to use, either OM_MOT_LINEAR, OM_MOT_QUAD, or OM_MOT_QUADINV. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01211">1211</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1adc5d528f0f1f25c32098debae06212"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_En</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable Motor</p>
<p>Sets the current Enable/Disable flag value.</p>
<p>If the motor is not enabled, calls to <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a> will return immediately and trigger a callback with the OM_MOT_DONE value. It will not be possible to move the motor in any fashion while the motor is disabled.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_En</td><td>Enable (true) or Disable (false) the motor </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00334">334</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9bf7bbb045003f05fbb63d6418fb19a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Enable Flag Value</p>
<p>Returns the current enable flag value.</p>
<dl class="section return"><dt>Returns:</dt><dd>Enabled (true) or Disabled (false); </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00347">347</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0da5d9617e961b8c9430815ce7dba80f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void home </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send Motor Home</p>
<p>Send motor home immediately.</p>
<p>This method will not stop any ongoing move, but it will immediately send the motor back to its home position, and will result in an aborted move.</p>
<p>Like other moves, this move is non-blocking and will trigger the callback to be executed with the OM_MOT_DONE argument when the send to home move is completed. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01494">1494</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7d693185d668a347e9886f376eeb563a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long homeDistance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Distance from Home</p>
<p>Returns the number of steps and direction back to the home position.</p>
<dl class="section return"><dt>Returns:</dt><dd>A signed long, representing the distance and direction from home. A negative number represents the motor is that many steps in the false direction from home, whereas positive represents that many steps in the true ddirection from home. </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01478">1478</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a51cda9b254c4272d077e07f8f3674a70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void homeSet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Home</p>
<p>Sets the current position of the motor as the home position. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01464">1464</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a382b9b9aaa918e6d58b0d3bd4701ee3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxSpeed </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>p_Speed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Maximum Stepping Speed</p>
<p>Sets the maximum speed at which the motor will move using the no- or two- argument form of <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a>.</p>
<p>This method controls the speed at which moves are made when requesting a move without a specified arrival time. It does not alter the behavior of the step timing mechanism, but instead puts an additional limit on the time calculated to take a move such that the motor will be given enough time to make the move at the specified speed.</p>
<p>This method is best used, for example, to limit the speed at which a <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a> is made, when we want that speed to fall between two usable rates, for example, 800 steps per second is lower than the minimum rate of 1,000 steps per second.</p>
<p>The following is an example of limiting a move without a specified arrival time to 500 steps/second maximum speed:</p>
<div class="fragment"><div class="line"> <span class="keywordtype">void</span> setup() {</div>
<div class="line">   Motor.<a class="code" href="class_o_m_motor.html#afe30fede1ee2022879691dca251e3046">maxStepRate</a>(5000); </div>
<div class="line">   Motor.<a class="code" href="class_o_m_motor.html#a382b9b9aaa918e6d58b0d3bd4701ee3a">maxSpeed</a>(500);</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">void</span> loop() {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir</a> = <span class="keyword">true</span>;</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>( ! Motor.<a class="code" href="class_o_m_motor.html#aaa6432a11cc8aa43cdcac30e43bf038f">running</a>() {</div>
<div class="line">        <a class="code" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move</a>(dir, 1000);</div>
<div class="line">        dir = !<a class="code" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir</a>;</div>
<div class="line"> }</div>
</div><!-- fragment --><p>Additional benefits of the above code is that the timing loop will run at the maximum possible speed, allowing for the smoothest and most correct delay between steps, but the motor will still be limited to 800 steps per second in the above move.</p>
<p>Note: if you specify a value greater than the currently set <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a>, your input will be ignored.</p>
<p>This method has no effect on the six-argument form of <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a>, <a class="el" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan()</a>, <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a>, or continuous motion movements.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Speed</td><td>Maximum speed, in steps per second </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00661">661</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a027801e9563fbed2ee39de06e90abc0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int maxSpeed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Maximum Stepping Speed</p>
<p>Returns the current maximum stepping speed.</p>
<p>Note: this value is different than that returned by <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a>.</p>
<dl class="section return"><dt>Returns:</dt><dd>Maximum steping speed, in steps/second </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00678">678</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="afe30fede1ee2022879691dca251e3046"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxStepRate </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>p_Rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Maximum Stepping Rate</p>
<p>Sets the maximum rate at which steps can be taken.</p>
<p>Due to the nature of the timing calculations, you are limited to one of the following choices: 5000, 4000, 2000, and 1000. Any other input will be ignored and result in no change.</p>
<p>Please note: the maximum rate here defines how often the step interrupt service routine runs. The higher the rate you use, the greater the amount of CPU that will be utilized to run the stepper. At the maximum rate, over 50% of the available processing time of an Atmega328 is utilized at 16Mhz, while at the lowest rate, approximately 25% of the processing time is utilized.</p>
<p>For more information on step timing, see the <a class="el" href="ommotion.html#steptiming">Stepping Cycle</a> section.</p>
<p>This rate does not dictate the actual speed of specific moves, it defines the highest speed which is achievable for any kind of move.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Rate</td><td>The rate specified as a number of steps per second (5000, 4000, 2000, or 1000) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00705">705</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad4445e8f1adc4efac5f792af25f7e660"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int maxStepRate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get Maximum Stepping Rate</p>
<p>Returns the current maximum stepping rate in steps per second.</p>
<dl class="section return"><dt>Returns:</dt><dd>Maximum rate in steps per second </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00730">730</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5515f30ddba250317a9fcc7656027ce9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void maxSteps </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Steps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set Maximum Steps</p>
<p>Sets the maximum steps to be taken, for both continuous and non- continuous moves.</p>
<p>Once this steps count is achieved, the motor will be stopped immediately and the callback will be called with the OM_MOT_DONE parameter. It will not be possible to move again until the <a class="el" href="class_o_m_motor.html#ac8bb3912a3ce86b15842e79d0b421204">clear()</a> method has been called.</p>
<p>Set the maximum steps to 0 to disable this feature.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Steps</td><td>Maximum steps to move </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00594">594</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac58fecb524061103a892aa668a383001"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long maxSteps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Maximum Steps</p>
<p>Returns the current maximum step count.</p>
<dl class="section return"><dt>Returns:</dt><dd>Maximum Steps to Move </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00606">606</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a68c0b61b84e4e095b6463cadc275adae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void move </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move Now</p>
<p>Immediately executes a move using saved parameters.</p>
<p>This method will execute either a continuous or non-continuous move using the values currently saved in <a class="el" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir()</a> and <a class="el" href="class_o_m_motor.html#a92df9971ba19be0a214e283934190285">steps()</a> or <a class="el" href="class_o_m_motor.html#ac7d2282b01f693b2cd49fb4210a278a8">contSpeed()</a>, depending on your current motion type.</p>
<p>For continuous motion, you must specify 0 as the number of steps. To limit continuous motion travel, use <a class="el" href="class_o_m_motor.html#ac58fecb524061103a892aa668a383001">maxSteps()</a> instead.</p>
<p>For non-continuous motion, this form of move allows you to only specify the destination and direction (using saved parameters), and the motor will move as quickly as possible to the given destination, with acceleration and deceleration ramping occuring over 100 steps, or 1/4 of the total steps for the move - whichever is less. The speed of this form of move is controlled by the lesser of <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a> or <a class="el" href="class_o_m_motor.html#a027801e9563fbed2ee39de06e90abc0d">maxSpeed()</a>.</p>
<p>If a move can be executed, asynchronous movement is initiated and the callback is called, with OM_MOT_BEGIN passed as the argument value.</p>
<p>If the motor is disabled, or the maximum # of steps has been reached, the callback will be executed with the OM_MOT_DONE argument immediately, and no move will take place. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01028">1028</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4c457cae2cdb8d0d9a9bdd0ee872a6a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void move </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_Dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Steps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move Now</p>
<p>Immediately executes a move using specified parameters.</p>
<p>This method will execute either a continuous or non-continuous move using the values passed as arguments. If the direction of the motor set by <a class="el" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir()</a> is different than the value passed as an argument, <a class="el" href="class_o_m_motor.html#a54fdfc4868bd5603993968433651c8e1">dir()</a> will return the value passed here as an argument until the move is completed or stopped.</p>
<p>For continuous motion, you must specify 0 as the number of steps. To limit continuous motion travel, use <a class="el" href="class_o_m_motor.html#ac58fecb524061103a892aa668a383001">maxSteps()</a> instead.</p>
<p>For non-continuous motion, this form of move allows you to only specify the destination and direction, and the motor will move as quickly as possible to the given destination, with acceleration and deceleration ramping occuring over 100 steps, or 1/4 of the total steps for the move - whichever is less. The speed of this form of move is controlled by the lesser of <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a> or <a class="el" href="class_o_m_motor.html#a027801e9563fbed2ee39de06e90abc0d">maxSpeed()</a>.</p>
<p>If a move can be executed, asynchronous movement is initiated and the callback is called, with OM_MOT_BEGIN passed as the argument value.</p>
<p>If the motor is disabled, or the maximum # of steps has been reached, the callback will be executed with the OM_MOT_DONE argument immediately, and no move will take place. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01061">1061</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab7e453c668634a35194ca67cc42ae9a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void move </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_Dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Decel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move Now</p>
<p>Executes a move immediately using the provided parameters.</p>
<p>This method allows you to make a complete move by specifying the distance to move, when to arrive at that destination, acceleration time, and deceleration time.</p>
<p>This is the most simple way to execute a complete move in continuous motion with ease-in and -out with applied to the entire move.</p>
<p>The easing algorithm used can be configured via the <a class="el" href="class_o_m_motor.html#a55b7db1caa5d2b73603d94af75a974a1">easing()</a> method.</p>
<p>Specify the time you to arrive at the destination position (in mS from now), how much of that time is spent accelerating (the shorter this time, the sharper the easing curve), and how much of that time is spent decelerating to a stop. The motor will arrive at the given position, in the given time (with an error rate not to exceed 0.00024% for most moves), having eased in and out of the maximum speed required to complete the move in time.</p>
<p>If a move can be executed, asynchronous movement is initiated and the callback is called. When in continuous motion, the OM_MOT_DONE argument will be passed to the callback, otherwise OM_MOT_BEGIN will be passed.</p>
<p>If the motor is disabled, or the maximum # of steps has been reached, the callback will be executed with the OM_MOT_DONE argument immediately, and no move will take place.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Dir</td><td>The direction to move</td></tr>
    <tr><td class="paramname">p_Dist</td><td>The distance to move (steps)</td></tr>
    <tr><td class="paramname">p_Time</td><td>The total time to travel to the new position (mS)</td></tr>
    <tr><td class="paramname">p_Accel</td><td>The travel time spent accelerating to full speed (mS)</td></tr>
    <tr><td class="paramname">p_Decel</td><td>The travel time spent decelerating back to a stop (mS) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00973">973</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaeaf316ce9ab844f4f7f6400330cee08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ms </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>p_Div</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set MicroSteps</p>
<p>Sets the current microstep setting. You may choose from the following values:</p>
<p>1, 2, 4, 8, or 16</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Div</td><td>Microstep setting value </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00125">125</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a576cf5e0aec6027764a46713161962a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get MicroSteps</p>
<p>Returns the current microstep setting.</p>
<dl class="section return"><dt>Returns:</dt><dd>The current microstep setting. </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00108">108</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a00a5361f6de10d4953f3af31f8e8e60f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plan </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Shots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_Dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Decel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Plan an Interleaved Move</p>
<p>Plans out an interleaved move with acceleration and deceleration profile.</p>
<p>This method plans out a complex movement that is to be made out of several smaller, individual movements. This allows one to interleave motor movement between other activities (such as firing a camera), while maintaining user-controlled acceleration and deceleration curves.</p>
<p>Given a number of interleaved intervals, a total number of steps to move, the count of intervals to accelerate to full speed over, and the count of intervals to decelerate back to a stop, this method performs all activities neccessary.</p>
<p>After calling this method, you may then use <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a> at each interval to move the number of steps. The number of steps used in each move are automatically defined to re-create the desired acceleration and deceleration curves.</p>
<p>The easing algorithm to use for mapping the planned move (but not making Note that the current plan is reset each time you call <a class="el" href="class_o_m_motor.html#ac8bb3912a3ce86b15842e79d0b421204">clear()</a>.</p>
<p>A planned move can result in movement that is not as smooth as that of a single move executed over the same period of time.</p>
<p>During a planned move, the same algorithm ussed to control acceleration and velocity in a single move is applied to the plan to determine how many steps to take at each interval. A single move run in real-time has its speed varied once per millisecond (see <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a> for more information), however a planned move is only able to vary its speed at each interval. In addition, a planned move may only take full steps during each transition, it is not possible to spread an individual step across two intervals.* The result of this is that for a the planned move to haave the same output smoothness as a single move, there must an equivalent number of intervals for the same time period.</p>
<p>While it is not possible to spread a single step across two intervals in a plannned move, most planned moves do not result in a whole integer of movement at each step. The remainder of a step which was required to be taken but not is accumulated until it overflows, and an additional step is taken at this time. In this manner, more natural output movement is created given most input parameters.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Shots</td><td>Number of intervals in the plan.</td></tr>
    <tr><td class="paramname">p_Dir</td><td>Direction of travel for the plan</td></tr>
    <tr><td class="paramname">p_Dist</td><td>Number of steps to travel total</td></tr>
    <tr><td class="paramname">p_Accel</td><td>Number of intervals during which acceleration occurs</td></tr>
    <tr><td class="paramname">p_Decel</td><td>Number of intervals during which deceleration occurs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00804">804</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5c625e3894926c9123979312ab13a746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void planRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Execute the Next Iteration of the Current Plan</p>
<p>Executes the next move interval as dictated by the current plan.</p>
<p>If a plan has been created using <a class="el" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan()</a>, this method makes the next movement as defined in the current plan. This method is used to create interleaved movement, wherein the motor moves between some other activity. At each call to <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a>, the next set of steps is executed. The <a class="el" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan()</a> method initiates the plan, and this method carries it out as needed.</p>
<p>A movment using <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a> is always executed at the maximum speed allowed, as defined by <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a>. If this is too fast for your motor, you must use <a class="el" href="class_o_m_motor.html#ad4445e8f1adc4efac5f792af25f7e660">maxStepRate()</a> to set your step rate to the value nearest, and lower than that which can be achieved by your motor.</p>
<p>If a move can be executed, asynchronous movement is initiated and the callback is called. OM_MOT_BEGIN will be passed to the callback when the motion sequence begins. After the motion sequence has been completed, the callback will be called again with the OM_MOT_DONE argument.</p>
<p>If the motor is disabled, the maximum # of steps has been reached, or the plan has been fully executed the callback will be executed with the OM_MOT_DONE argument immediately, and no move will take place.</p>
<p>The following is an example of a simple interleaved motion using <a class="el" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan()</a> and <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a>:</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #include &quot;TimerOne.h&quot;</span>;</div>
<div class="line"><span class="preprocessor"> #include &quot;OMMotor.h&quot;</span>:</div>
<div class="line"></div>
<div class="line"> <a class="code" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> Motor = <a class="code" href="class_o_m_motor.html#af7476c0ad5608f55afe84f1b106d65dd">OMMotor</a>();</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">volatile</span> <span class="keywordtype">boolean</span> okNext = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalIntervals = 500;</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalSteps = 2000;</div>
<div class="line">        <span class="comment">// 20% of time accelerating</span></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> accelTm = totalSteps / 5;</div>
<div class="line">        <span class="comment">// 10% of time decelerating</span></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decelTm = totalSteps / 10;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">void</span> setup() {</div>
<div class="line">        Serial.begin(19200);</div>
<div class="line">        </div>
<div class="line">         <span class="comment">// setup motor</span></div>
<div class="line">        Motor.<a class="code" href="class_o_m_motor.html#a1adc5d528f0f1f25c32098debae06212">enable</a>(<span class="keyword">true</span>);</div>
<div class="line">        Motor.<a class="code" href="class_o_m_motor.html#aaeaf316ce9ab844f4f7f6400330cee08">ms</a>(1);</div>
<div class="line"></div>
<div class="line">        Motor.<a class="code" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler</a>(motorCB);</div>
<div class="line">        </div>
<div class="line">         <span class="comment">// set max step rate</span></div>
<div class="line">        Motor.<a class="code" href="class_o_m_motor.html#afe30fede1ee2022879691dca251e3046">maxStepRate</a>(1000);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// plan our interleaved move</span></div>
<div class="line">        Motor.<a class="code" href="class_o_m_motor.html#a00a5361f6de10d4953f3af31f8e8e60f">plan</a>(totalIntervals, <span class="keyword">true</span>, totalSteps, accelTm, decelTm);</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">void</span> loop() {</div>
<div class="line">        </div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> intervalsTaken = 0;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span>( okNext &amp;&amp; intervalsTaken &lt; totalIntervals ) {</div>
<div class="line">                <span class="comment">// do something, like fire a camera</span></div>
<div class="line">                </div>
<div class="line">                intervalsTaken++;</div>
<div class="line">                okNext = <span class="keyword">false</span>; </div>
<div class="line">                 <span class="comment">// execute next planned moved</span></div>
<div class="line">                 </div>
<div class="line">                Motor.<a class="code" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun</a>();</div>
<div class="line">        }</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">void</span> motorCB(byte code) {</div>
<div class="line">   <span class="keywordflow">if</span>( code == OM_MOT_DONE ) {</div>
<div class="line">     okNext = <span class="keyword">true</span>;</div>
<div class="line">   } </div>
<div class="line"> }</div>
</div><!-- fragment --><p>In this example, we plan a move over 500 intervals to travel 1000 steps and spend 20% of the total movement accelerating, while spending 10% decelerating. After each activity has occurred, we call <a class="el" href="class_o_m_motor.html#a5c625e3894926c9123979312ab13a746">planRun()</a> to move the motor.</p>
<p>While the motor is moving, the value of okNext stays false, and when the move is completed, the callback named motorCB() is called. This callback checks the code returned, and if it indicates the motor has completed movement, it changes the value of okNext to true, where the main loop then takes another activity and moves the motor again. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00908">908</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaa6432a11cc8aa43cdcac30e43bf038f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool running </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Motor Running?</p>
<p>Returns whether or not the motor is currently moving.</p>
<dl class="section return"><dt>Returns:</dt><dd>Running (true) or Stopped (false) </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00548">548</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5cc55f2fc4fa7abccee93fa19487f6af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setHandler </td>
          <td>(</td>
          <td class="paramtype">void(*)(uint8_t)&#160;</td>
          <td class="paramname"><em>p_Func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set Callback Handler
</pre><p>As actions start and complete, a callback is used to signal what is happening, without having to query the method to see if a given action is still occuring.</p>
<p>By passing a function pointer to this method, that function will be executed at each one of these moments, and passed a single, one byte argument that matches the signal which is to be sent. The template for this function is:</p>
<div class="fragment"><div class="line"> <span class="keywordtype">void</span> <span class="keyword">function</span>(byte val) { }</div>
</div><!-- fragment --><p>The following codes are defined:</p>
<div class="fragment"><div class="line"> OM_MOT_DONE </div>
<div class="line">      - The motor has stopped moving</div>
<div class="line"> OM_MOT_MOVING</div>
<div class="line">      - The motor has begun moving</div>
</div><!-- fragment --><p>An example of an appropriate callback handler:</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #include &quot;TimerOne.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;OMMotor.h&quot;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="class_o_m_motor.html" title="Motor Manager.">OMMotor</a> Motor = <a class="code" href="class_o_m_motor.html#af7476c0ad5608f55afe84f1b106d65dd">OMMotor</a>();</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  </div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a1adc5d528f0f1f25c32098debae06212">enable</a>(<span class="keyword">true</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#ac91239f86656bf33b05ad4c3ec47cfc9">continuous</a>(<span class="keyword">false</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a5cc55f2fc4fa7abccee93fa19487f6af">setHandler</a>(motorCallback);</div>
<div class="line">  </div>
<div class="line">  Serial.begin(19200);</div>
<div class="line">  </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>( ! Motor.<a class="code" href="class_o_m_motor.html#aaa6432a11cc8aa43cdcac30e43bf038f">running</a>() ) {</div>
<div class="line">  delay(1000);</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;Moving!&quot;</span>);</div>
<div class="line">  Motor.<a class="code" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move</a>(<span class="keyword">true</span>, 1000);</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> motorCallback( byte code ) {</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>( code == OM_MOT_DONE ) {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Done!&quot;</span>);</div>
<div class="line">    Serial.print(<span class="stringliteral">&quot;Moved: &quot;</span>);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> smoved = Motor.<a class="code" href="class_o_m_motor.html#a3166a4727f6b0374d2d17a33c7582306">stepsMoved</a>();</div>
<div class="line">    Serial.println(smoved, DEC);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Got Begin!&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Func</td><td>A pointer to a function taking a single byte argument </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00278">278</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9c5a196f71017496048e48e8ba6d2dad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sleep </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p_En</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Enable Sleep</p>
<p>Sets the current sleep between move flag value and immediately changes the status off the motor driver sleep line.</p>
<p>When sleep is enabled, the motor driver will be put to sleep between moves to conserve energy and reduce the heat of both the motor and the driver.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_En</td><td>Enable (true) or Disable (false) sleeps between moves </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00365">365</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adc0fa1f45e9d6b5ee5b42876bde4ec84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Sleep Flag Value</p>
<p>Returns the current value of the sleep between moves flag.</p>
<dl class="section return"><dt>Returns:</dt><dd>Enabled (true), Disabled (false() </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00385">385</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a679f6967ffb3a019ca23046c95c485f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void steps </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>p_Steps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set Steps per Move</p>
<p>Sets the current steps per move for non-continuous motion moves.</p>
<p>This method sets a default steps per move so that one may use <a class="el" href="class_o_m_motor.html#a68c0b61b84e4e095b6463cadc275adae">move()</a> with no arguments.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_Steps</td><td>Steps Per Move </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00563">563</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a92df9971ba19be0a214e283934190285"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long steps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Steps Per Move</p>
<p>Returns the current steps per move for non-continuous motion moves.</p>
<dl class="section return"><dt>Returns:</dt><dd>Steps Per Move </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00575">575</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3166a4727f6b0374d2d17a33c7582306"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long stepsMoved </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get Steps Moved</p>
<p>Returns the count of steps moved since the last <a class="el" href="class_o_m_motor.html#ac8bb3912a3ce86b15842e79d0b421204">clear()</a> call.</p>
<dl class="section return"><dt>Returns:</dt><dd>Steps moved </dd></dl>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l00743">743</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8c528baf37154d347366083f0f816846"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stop Immediately</p>
<p>Immediately stops any movement in progress.</p>
<p>Triggers the callback with the OM_MOT_DONE argument. </p>

<p>Definition at line <a class="el" href="_o_m_motor_8cpp_source.html#l01169">1169</a> of file <a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_o_m_motor_8h_source.html">OMMotor.h</a></li>
<li><a class="el" href="_o_m_motor_8cpp_source.html">OMMotor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_o_m_motor.html">OMMotor</a></li>
    <li class="footer">Generated on Sun Jun 17 2012 13:59:33 for OpenMoCo AVR Libraries by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.1 </li>
  </ul>
</div>
</body>
</html>
